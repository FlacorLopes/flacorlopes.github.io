(this["webpackJsonpdesafio-cubos"]=this["webpackJsonpdesafio-cubos"]||[]).push([[0],[,,,function(e,t,n){e.exports={container:"MovieDetails_container__1V0og",header:"MovieDetails_header__1jF6Q",title:"MovieDetails_title__KWSzd",release:"MovieDetails_release__2xKrt",content:"MovieDetails_content__ETBgC",poster:"MovieDetails_poster__3gAc2",contentColumn:"MovieDetails_contentColumn__1GPLu",tagsAndRate:"MovieDetails_tagsAndRate__3Sv91",infoContainer:"MovieDetails_infoContainer__2ktTg",info:"MovieDetails_info__3b9Qx"}},function(e,t,n){e.exports={searchResult:"SearchResult_searchResult__1BLKj",column:"SearchResult_column__17DO4",header:"SearchResult_header__eAGcL",innerHeader:"SearchResult_innerHeader__3OxMM",poster:"SearchResult_poster__P9IXF",title:"SearchResult_title__ZhnDT",releaseDate:"SearchResult_releaseDate__38N6Q",synopsis:"SearchResult_synopsis__13s7k",mobileImage:"SearchResult_mobileImage__2rPHr"}},,,,,,,,,,,function(e,t,n){e.exports={header:"Header_header__279VB"}},function(e,t,n){e.exports={search:"Search_search__2g15Z"}},function(e,t,n){e.exports={paginator:"Paginator_paginator__O4Dze"}},function(e,t,n){e.exports={circle:"Circle_circle__SNN2G"}},function(e,t,n){e.exports={tags:"TagList_tags__1rx4k"}},function(e,t,n){e.exports={mainSection:"App_mainSection__eoJwT"}},function(e,t,n){e.exports=n(29)},,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),o=n.n(c),s=n(15),l=n.n(s),i=n(8),u=function(){return r.a.createElement("header",{className:l.a.header},r.a.createElement("span",null,r.a.createElement(i.b,{to:"/"},"Movies")))},m=n(1),d=n(16),p=n.n(d),f=n(2),v=n.n(f),g=n(7),h=n(5),_=n(11),E="4550f1f87b0fbedf6aaed73883e8445c",b="pt-BR",S="https://api.themoviedb.org/3/",y="".concat(S,"genre/movie/list?api_key=").concat(E,"&language=").concat(b),w="".concat(S,"genre/tv/list?api_key=").concat(E,"&language=").concat(b),N="".concat(S,"configuration?api_key=").concat(E),x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return t?"".concat(S,"discover/movie?api_key=").concat(E,"&language=").concat(b,"&sort_by=popularity.desc&include_adult=false&include_video=true&page=").concat(a,"&with_genres=").concat(t):n?"".concat(S,"discover/movie?api_key=").concat(E,"&language=").concat(b,"&sort_by=popularity.desc&include_adult=false&include_video=true&page=").concat(a,"&year=").concat(n):"".concat(S,"search/movie?api_key=").concat(E,"&language=").concat(b,"&query=").concat(encodeURIComponent(e),"&page=").concat(a,"&include_adult=false")},O=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("API_CONFIGS")){e.next=8;break}return e.next=3,fetch(N);case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,localStorage.setItem("API_CONFIGS",JSON.stringify(n));case 8:return e.abrupt("return",JSON.parse(localStorage.getItem("API_CONFIGS")));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a,r,c,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("GENRES")){e.next=15;break}return e.next=3,fetch(y);case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.next=9,fetch(w);case 9:return a=e.sent,e.next=12,a.json();case 12:r=e.sent,localStorage.setItem("GENRES_MOVIES",JSON.stringify(n)),localStorage.setItem("GENRES_TV",JSON.stringify(r));case 15:return c=JSON.parse(localStorage.getItem("GENRES_MOVIES")),o=JSON.parse(localStorage.getItem("GENRES_TV")),s=[].concat(Object(_.a)(c.genres),Object(_.a)(o.genres.filter((function(e){return!c.genres.some((function(t){return t.id===e.id}))})))),e.abrupt("return",s);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=Object(a.createContext)(),I=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(h.a)(n,2),o=c[0],s=c[1],l=Object(a.useState)(""),i=Object(h.a)(l,2),u=i[0],m=i[1],d=Object(a.useState)([]),p=Object(h.a)(d,2),f=p[0],_=p[1],E=Object(a.useState)(0),b=Object(h.a)(E,2),S=b[0],y=b[1],w=Object(a.useState)(1),N=Object(h.a)(w,2),I=N[0],R=N[1],C=Object(a.useState)(null),D=Object(h.a)(C,2),M=D[0],P=D[1],A=Object(a.useState)(1),L=Object(h.a)(A,2),F=L[0],G=L[1];Object(a.useEffect)((function(){null===o&&function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o]);var B=function(){var e=Object(g.a)(v.a.mark((function e(t,n,a,r){var c,s,l,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.trim().length<1)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(x(t,n,a,r));case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.next=10,O();case 10:l=e.sent,y(s.total_results),R(r),i=function(e,t){return{id:e.id,title:e.title,release:new Date(e.release_date).toLocaleDateString(),synopsis:e.overview,rate:e.vote_average,tags:e.genre_ids.map((function(e){return o.find((function(t){return t.id===e}))})),posterImg:e.poster_path?t.images.secure_base_url+t.images.poster_sizes[3]+e.poster_path:null}},s.results&&_(s.results.map((function(e){return i(e,l)})));case 15:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();return r.a.createElement(k.Provider,{value:{searchResults:f,query:u,setQuery:m,handleSearch:function(e,t){if(e.preventDefault(),!(t.length<2)){var n=o.findIndex((function(e){return e.name.toLowerCase()===t.toLocaleLowerCase()}));-1===n?(B(t,null,null,I),G(1)):B(t,o[n].id,null,I)}},totalResults:S,selectedMovie:M,setSelectedMovie:P,currentPage:F,setCurrentPage:G}},t)},R=k,C=function(){var e=Object(a.useRef)(),t=Object(a.useContext)(R),n=t.handleSearch,c=t.query,o=t.setQuery;return r.a.createElement("form",{onSubmit:function(t){return n(t,e.current.value)}},r.a.createElement("input",{type:"text",placeholder:"Busque um filme por nome, ano ou g\xeanero...",className:p.a.search,value:c,onChange:function(e){var t=e.target;return o(t.value)},onBlur:function(e){return n(e,c)},ref:e}))},D=n(17),M=n.n(D),P=n(18),A=n.n(P),L=function(e){var t=e.content,n=e.width,a=e.font;return r.a.createElement("div",{className:A.a.circle,style:{width:n||"50px",height:n||"50px",fontSize:a||"1.2rem"}},t)},F=function(e){var t=e.current,n=e.action,a=e.pages;return r.a.createElement("nav",{className:M.a.paginator},Array(a||1).fill().map((function(e,a){return++a,r.a.createElement("button",{key:a,onClick:function(e){e.target.scrollIntoView(),n(a)}},a===t?r.a.createElement(L,{content:a,width:"45px"}):a)})))},G=n(4),B=n.n(G),J=n(19),T=n.n(J),W=function(e){var t=e.tags;return r.a.createElement("ul",{className:T.a.tags},t.map((function(e){return r.a.createElement("li",{key:Math.random()},e.name)})))},V=function(e){var t=e.title,n=e.rate,a=e.releaseDate,c=e.synopsis,o=e.tags,s=e.poster;e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:B.a.searchResult},r.a.createElement("div",{className:B.a.poster,style:{backgroundImage:s?"url('".concat(s,"')"):""}}),r.a.createElement("div",{className:B.a.column},r.a.createElement("div",{className:B.a.header},r.a.createElement("div",{className:B.a.innerHeader},r.a.createElement(L,{content:n,width:"65px",className:B.a.rating}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",paddingLeft:"20px"}},r.a.createElement("span",{className:B.a.title},t),r.a.createElement("span",{className:B.a.releaseDate},a)))),r.a.createElement("div",{style:{paddingLeft:"40px"}},r.a.createElement("div",{className:B.a.synopsis},r.a.createElement("img",{src:s,alt:"poster",className:B.a.mobileImage}),r.a.createElement("p",null,c||"Descri\xe7\xe3o n\xe3o dispon\xedvel")),r.a.createElement(W,{tags:o})))))},U=function(){var e=Object(a.useContext)(R),t=e.searchResults,n=(e.totalResults,e.setSelectedMovie),c=e.currentPage,o=e.setCurrentPage,s=Math.ceil(t.length/5),l=5*(c-1),u=5*c;return r.a.createElement(r.a.Fragment,null,t.slice(l,u).map((function(e){return r.a.createElement(i.b,{to:"/detalhes",key:"clickable"+e.id,onClick:function(){return function(e){var a=t.findIndex((function(t){return t.id===e}));n(t[a])}(e.id)},style:{width:"100%"}},r.a.createElement(V,{key:e.id,title:e.title,releaseDate:e.release,synopsis:e.synopsis,rate:"".concat(10*e.rate,"%"),tags:e.tags,poster:e.posterImg}))})),0!==t.length&&r.a.createElement(F,{pages:s,current:c,action:function(e){return o(e)}}))},H=n(20),Q=n.n(H),q=function(){return r.a.createElement("main",{className:Q.a.mainSection},r.a.createElement(C,null),r.a.createElement(U,null))},z=n(3),K=n.n(z),Z=function(e){var t=e.column,n=e.value;return r.a.createElement("div",{className:K.a.info},r.a.createElement("span",null,t),r.a.createElement("span",null,n))},X=function(e){return isNaN(e)||0===e||!isFinite(e)?"N\xe3o dispon\xedvel":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},$=function(e){if("string"===typeof e)return"released"===(e=e.toLowerCase())?"Lan\xe7ado":"in production"===e?"Em produ\xe7\xe3o":"post production"===e?"P\xf3s produ\xe7\xe3o":"canceled"===e?"Cancelado":"rumored"===e?"Previsto":void 0},Y=function(e){try{return e.spoken_languages[0].name}catch(t){return"N\xe3o dispon\xedvel"}},ee=function(e){try{return e.videos.results[0].key}catch(t){return null}},te=function(e){var t,n=e.movie,c=Object(a.useState)(null),o=Object(h.a)(c,2),s=o[0],l=o[1],i=Object(m.h)();return Object(a.useEffect)((function(){null===s&&n&&function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch((r=n.id,"".concat(S,"movie/").concat(r,"?api_key=").concat(E,"&language=").concat(b,"&append_to_response=videos")));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,l(a);case 7:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}()()}),[s,n,i]),n?r.a.createElement("div",{className:K.a.container},r.a.createElement("div",{className:K.a.header},r.a.createElement("span",{className:K.a.title},n.title),r.a.createElement("span",{className:K.a.release},n.release)),r.a.createElement("div",{className:K.a.content},r.a.createElement("div",{className:K.a.contentColumn},r.a.createElement("h2",null,"Sinopse"),r.a.createElement("p",null,n.synopsis||"N\xe3o dispon\xedvel"),r.a.createElement("h2",null,"Informa\xe7\xf5es"),r.a.createElement("div",{className:K.a.infoContainer},s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{column:"Situa\xe7\xe3o",value:$(s.status)}),r.a.createElement(Z,{column:"Idioma",value:Y(s)}),r.a.createElement(Z,{column:"Dura\xe7\xe3o",value:(t=s.runtime,"".concat(parseInt(t/60),"h").concat(parseInt(t%60),"min"))}),r.a.createElement(Z,{column:"Or\xe7amento",value:X(s.budget)}),r.a.createElement(Z,{column:"Receita",value:X(s.revenue)}),r.a.createElement(Z,{column:"Lucro",value:X(s.revenue-s.budget)}))),r.a.createElement("div",{className:K.a.tagsAndRate},r.a.createElement(W,{tags:n.tags}),r.a.createElement(L,{content:"".concat(10*n.rate,"%"),width:"100px",font:"2.5rem"}))),r.a.createElement("div",{className:K.a.poster},r.a.createElement("img",{src:n.posterImg,alt:"poster"}))),s&&ee(s)&&r.a.createElement("iframe",{width:"100%",height:"500",title:"video",src:"https://www.youtube.com/embed/".concat(ee(s)),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})):r.a.createElement(m.a,{to:"/"})},ne=function(){var e=Object(a.useContext)(R).selectedMovie;return r.a.createElement(te,{movie:e})};var ae=function(){return r.a.createElement(i.a,null,r.a.createElement(u,null),r.a.createElement(I,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/detalhes",element:r.a.createElement(ne,null)}),r.a.createElement(m.b,{path:"*",element:r.a.createElement(q,null)}))))},re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");re?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ce(t,e)}))}}()}],[[21,1,2]]]);
//# sourceMappingURL=main.33cb62f1.chunk.js.map